#!/bin/bash

if [[ ! $# -eq 1 ]]
  then
  echo -e "\e[95mBruh\e[0m you needa have just one argument. C'mon now."
else
  infile=$1
  if [[ $infile =~ .\.svg$ ]]
    then                              # Output Styles listed here:
    
    # 1. Print input file name
    echo -en "\e[4m"                  # Underline
    inlen=$(cat $infile | wc -l)
    echo -e "Input: \"$infile\" ($inlen lines)"
    echo -en "\e[24;96m"              # Cyan, no Underline
    
    # 2. Show input file
    
    # if [[ $inlen -gt 15 ]] 
    #   then
    #   cat $infile | head -n 10
    #   echo ...
    #   cat $infile | tail -n 5
    # else
      cat $infile
    # fi

    echo -en "\e[0m"                  # Reset Normal
    
    # 3. Convert to GCode
    fname=${infile%.svg}
    outfile=${fname//in\//out\/}.gcode
    cat $infile | python svg2gcode.py > $outfile
    outlen=$(cat $outfile | wc -l)

    echo -e "\e[0;4m"                  # White, Underlined
    
    # 4. Print output file name
    echo -e "Output: \"$outfile\" ($outlen lines)"

    echo -en "\e[24;33m"              # Orange, no Underline

    # 5. Print output file
    # if [[ $outlen -gt 15 ]] 
    #   then
    #   cat $outfile | head -n 10
    #   echo ...
    #   cat $outfile | tail -n 5
    # else
      cat $outfile
    # fi
    
    echo -ne "\e[0m"                  # Reset to normal
  else 
    echo -e "\e[31mNa.\e[0m That's not an svg file!"
  fi
fi
